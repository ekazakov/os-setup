---
#- name: Check git dotfiles
#  stat:
#    path: "{{ ansible_env.HOME }}/{{ item }}"
#  register: results
#  with_items:
#    - .gitconfig
#    - .gitignore_global

#- debug:
#    var: results
#- name: Remove old .gitconfig and .gitignore_global if exists
#  file:
#    path: "{{ ansible_env.HOME }}/{{ item }}"
#    state: absent
#  with_items:
#    - .gitconfig
#    - .gitignore_global

- name: Install karabiner-elements
  community.general.homebrew_cask:
    name: karabiner-elements
    state: present
    install_options: debug,appdir=/Applications

- name: Install more cli apps
  community.general.homebrew:
    name: "{{ item }}"
    state: present
  loop:
    - git
    - jq
    - htop
    - git-lfs
    - hub
    - nginx
    - node
    - editorconfig
    - openconnect
    - openssl
    - openvpn
    - readline
    - python
    - watchman
    - pnpm
    - wget
    - the_silver_searcher
    - ipcalc
    - reattach-to-user-namespace
    - colima
    - redis
    - sqlite
    - dockutil
    - python3
    - podman
    #    - vagrant # bad behaviour
    - minikube
    - tree
    - mkcert
    - hey
    - wrk
    #    - npkill # not available in brew
    #    - relabel # not available in brew
    #    - delta # not available in brew
    - tig

- name: Install more desktop apps
  community.general.homebrew_cask:
    name: "{{ item }}"
    state: present
    install_options: debug,appdir=/Applications
  loop:
    - arc
    - google-chrome
    - jetbrains-toolbox
    - sublime-text
    - visual-studio-code
    - raycast
    - skype
    - dropbox
    - deepl
    - private-internet-access
    - tunnelblick
    #- firefox-developer-edition #No Cask with this name exists.
    # use:
    # brew tap homebrew/cask-versions
    # brew install --cask firefox-developer-edition
    - anydesk
    - 4k-video-downloader
    - vlc
    - folx
    - dictionaries
    - zoom
    - cleanshot
